{"version":3,"sources":["./src/app/cupons/cupons.page.ts","./src/app/cupons/cupons.page.html","./src/app/cupons/validacao-cupom/validacao-cupom.component.scss","./src/app/cupons/shared/cupons.service.ts","./src/app/core/services/toast.service.ts","./src/app/cupons/validacao-cupom/validacao-cupom.component.ts","./src/app/cupons/cupons.page.scss","./src/app/cupons/cupons-routing.module.ts","./src/app/cupons/cupons.module.ts","./src/app/cupons/validacao-cupom/validacao-cupom.component.html","./src/app/estabelecimento/shared/estabelecimento.service.ts"],"names":[],"mappings":"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","file":"default~cupons-cupons-module~home-home-module.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport {Observable} from 'rxjs';\nimport {CupomService} from './shared/cupons.service';\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\nimport {ToastService} from '../core/services/toast.service';\nimport {EstabelecimentoService} from '../estabelecimento/shared/estabelecimento.service';\n\n@Component({\n  selector: 'app-cupons',\n  templateUrl: './cupons.page.html',\n  styleUrls: ['./cupons.page.scss'],\n})\nexport class CuponsPage implements OnInit {\n\n  cupons;\n  estabelecimentoKey: string;\n\n  constructor(\n    private estabelecimentoService: EstabelecimentoService,\n    private cuponsService: CupomService,\n    private toast: ToastService\n  ) { }\n\n  ngOnInit() {\n    this.estabelecimentoKey = this.estabelecimentoService.getEstalebelicimentoKey();\n    const cuponsSub = this.cuponsService.getByField('estabelecimentoKey', this.estabelecimentoKey).subscribe((cupons) => {\n      cuponsSub.unsubscribe();\n      this.cupons = cupons;\n    });\n  }\n\n\n}\n","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>cupons</ion-title>\\n    <ion-buttons class=\\\"adicionar-button\\\" routerLink=\\\"/tabs/cupons/adicionar\\\" slot=\\\"end\\\">\\n      <ion-icon name=\\\"add-outline\\\"></ion-icon>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-grid>\\n    <ion-row>\\n      <ion-col>\\n        <app-validacao-cupom></app-validacao-cupom>\\n      </ion-col>\\n    </ion-row>\\n    <ion-row>\\n      <ion-col>\\n        <h5 class=\\\"title ion-margin-bottom\\\">Cupons</h5>\\n        <div class=\\\"cupom-list\\\">\\n<!--          <p *ngIf=\\\"cupons.length === 0\\\">Não existe cupom cadastrado</p>-->\\n          <div class=\\\"cupom-item\\\" *ngFor=\\\"let cupom of cupons\\\">\\n            <ion-thumbnail slot=\\\"start\\\">\\n              <img *ngIf=\\\"cupom.imagem\\\" src=\\\"{{cupom.imagem}}\\\">\\n              <img *ngIf=\\\"!cupom.imagem\\\" src=\\\"assets/no_image.jpg\\\">\\n            </ion-thumbnail>\\n            <div class=\\\"content\\\">\\n              <ion-row>\\n                <p class=\\\"title\\\">{{cupom.nome}}</p>\\n                <a class=\\\"cupomLink ion-float-right\\\" [routerLink]=\\\"['adicionar', cupom.key]\\\">Gerenciar</a>\\n              </ion-row>\\n              <ion-row>\\n                <span *ngIf=\\\"cupom.status\\\" class=\\\"ativo\\\"></span>\\n                <p *ngIf=\\\"cupom.status\\\" class=\\\"tags\\\">Ativo</p>\\n\\n                <span *ngIf=\\\"cupom.status == 0\\\" class=\\\"desativado\\\"></span>\\n                <p *ngIf=\\\"cupom.status == 0\\\" class=\\\"tags\\\">Desativado</p>\\n              </ion-row>\\n              <ion-row>\\n                <p class=\\\"description\\\">{{cupom.descricao}}</p>\\n              </ion-row>\\n            </div>\\n          </div>\\n        </div>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n</ion-content>\\n\";","export default \".cupom-card {\\n  width: 100%;\\n  border-radius: 5px;\\n  padding: 15px;\\n  background-color: #ffffff;\\n  box-shadow: 0px 0px 7px 0px rgba(0, 0, 0, 0.29);\\n}\\n\\n.adicionar-button {\\n  margin-top: 50px;\\n  padding: 15px;\\n  color: #f2f2f2;\\n}\\n\\nion-button {\\n  --border-radius: 35px;\\n  margin-top: 15px;\\n  border-radius: 35px;\\n  box-shadow: 0px 0px 7px 0px rgba(0, 0, 0, 0.29);\\n  font-family: \\\"Ubuntu\\\", sans-serif;\\n  font-weight: normal;\\n  color: #333333;\\n}\\n\\np {\\n  font-size: 12px;\\n  font-weight: medium;\\n  color: #7c7b7b;\\n}\\n\\nion-input {\\n  border: 1px solid #b3b3b3;\\n  border-radius: 5px;\\n  margin-top: 10px;\\n  padding: 5px 15px !important;\\n  font-size: 14px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3ZhbGlkYWNhby1jdXBvbS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFdBQUE7RUFDQSxrQkFBQTtFQUNBLGFBQUE7RUFDQSx5QkFBQTtFQUNBLCtDQUFBO0FBQ0Y7O0FBQ0E7RUFDRSxnQkFBQTtFQUNBLGFBQUE7RUFDQSxjQUFBO0FBRUY7O0FBQUE7RUFDRSxxQkFBQTtFQUNBLGdCQUFBO0VBQ0EsbUJBQUE7RUFDQSwrQ0FBQTtFQUNBLGlDQUFBO0VBQ0EsbUJBQUE7RUFDQSxjQUFBO0FBR0Y7O0FBREE7RUFDRSxlQUFBO0VBQ0EsbUJBQUE7RUFDQSxjQUFBO0FBSUY7O0FBREE7RUFDRSx5QkFBQTtFQUNBLGtCQUFBO0VBQ0EsZ0JBQUE7RUFDQSw0QkFBQTtFQUNBLGVBQUE7QUFJRiIsImZpbGUiOiJ2YWxpZGFjYW8tY3Vwb20uY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY3Vwb20tY2FyZHtcbiAgd2lkdGg6IDEwMCU7XG4gIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgcGFkZGluZzogMTVweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjtcbiAgYm94LXNoYWRvdzogMHB4IDBweCA3cHggMHB4IHJnYmEoMCwwLDAsMC4yOSk7XG59XG4uYWRpY2lvbmFyLWJ1dHRvbntcbiAgbWFyZ2luLXRvcDogNTBweDtcbiAgcGFkZGluZzogMTVweDtcbiAgY29sb3I6ICNmMmYyZjI7XG59XG5pb24tYnV0dG9ue1xuICAtLWJvcmRlci1yYWRpdXM6IDM1cHg7XG4gIG1hcmdpbi10b3A6IDE1cHg7XG4gIGJvcmRlci1yYWRpdXM6IDM1cHg7XG4gIGJveC1zaGFkb3c6IDBweCAwcHggN3B4IDBweCByZ2JhKDAsMCwwLDAuMjkpO1xuICBmb250LWZhbWlseTogJ1VidW50dScsIHNhbnMtc2VyaWY7XG4gIGZvbnQtd2VpZ2h0OiBub3JtYWw7XG4gIGNvbG9yOiAjMzMzMzMzO1xufVxucHtcbiAgZm9udC1zaXplOiAxMnB4O1xuICBmb250LXdlaWdodDogbWVkaXVtO1xuICBjb2xvcjogIzdjN2I3Yjtcbn1cblxuaW9uLWlucHV0e1xuICBib3JkZXI6IDFweCBzb2xpZCAjYjNiM2IzO1xuICBib3JkZXItcmFkaXVzOiA1cHg7XG4gIG1hcmdpbi10b3A6IDEwcHg7XG4gIHBhZGRpbmc6IDVweCAxNXB4IWltcG9ydGFudDtcbiAgZm9udC1zaXplOiAxNHB4O1xufVxuIl19 */\";","import { Injectable } from '@angular/core';\nimport {AngularFireDatabase, AngularFireList} from \"@angular/fire/database\";\nimport {AngularFireStorage} from \"@angular/fire/storage\";\nimport {FirebasePath} from \"../../core/shared/firebase-path\";\nimport {filter, finalize, map, take, tap} from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CupomService {\n\n  cuponsRef: AngularFireList<any>;\n\n  constructor(\n    private db: AngularFireDatabase,\n    private storage: AngularFireStorage\n  ) {\n    this.cuponsRef = this.db.list(FirebasePath.CUPONS);\n  }\n\n  getByKey(key: string){\n    const path = `${FirebasePath.CUPONS}${key}`;\n    return this.db.object(path).snapshotChanges().pipe(\n      map( change => {\n        return { key: change.payload.key, ...change.payload.val() as {} };\n      })\n    );\n  }\n\n  getByField(field: string , value: string){\n    const cuponsRef = this.db.list(FirebasePath.CUPONS, query => query\n      .orderByChild(field)\n      .equalTo(value));\n\n    return cuponsRef.snapshotChanges().pipe(\n      map(changes => {\n        return changes.map(m => ({ key: m.payload.key, ...m.payload.val() as {} }));\n      })\n    );\n  }\n\n  insert(cupom: any){\n    return new Promise(resolve => {\n      this.cuponsRef.push(cupom)\n        .then((result: any) => resolve(result.key));\n    });\n  }\n\n  update(key: string, cupom: any){\n    return new Promise((resolve, reject) => {\n\n      this.cuponsRef.update(key, cupom)\n        .then(() => resolve(key))\n        .catch(() => reject());\n    });\n  }\n\n  remove(key: string){\n    return this.cuponsRef.remove(key);\n  }\n\n  uploadImg(key: string, file: File){\n    const filePath = `${FirebasePath.CUPONS}${key}/${file.name}`;\n    const ref = this.storage.ref(filePath);\n    const task = ref.put(file);\n    task.snapshotChanges().pipe(\n      finalize(() => {\n        ref.getDownloadURL().subscribe((url => {\n          this.cuponsRef.update(key, {imagem: url, filePath: filePath });\n        }));\n      })\n    ).subscribe();\n  }\n\n  removeImg(filePath: string, key: string, atualizarCupom: boolean = true) {\n    const ref = this.storage.ref(filePath);\n    ref.delete();\n    if (atualizarCupom){\n      this.cuponsRef.update(key, {imagem: '', filePath: '' });\n    }\n  }\n\n  getGeneratedByToken(estabelecimentoKey, token){\n    // const path = `${FirebasePath.CUPONS_GERADOS}${estabelecimentoKey}`;\n    const path = `${FirebasePath.CUPONS_GERADOS}`;\n    const cuponsRef = this.db.list(path, query => query\n      .orderByChild('token')\n      .equalTo(token)\n      .limitToFirst(1));\n\n    return cuponsRef.snapshotChanges().pipe(\n      map(changes => {\n        return changes.map(m => ({ key: m.payload.key, ...m.payload.val() as {} }));\n      })\n    );\n  }\n\n  validateCupom(estabelecimentoKey: string, token: string): any{\n    // const path = `${FirebasePath.CUPONS_GERADOS}${estabelecimentoKey}`;\n    const path = `${FirebasePath.CUPONS_GERADOS}`;\n\n    const cuponsGRef = this.db.list(path);\n\n    const sub = this.getGeneratedByToken(estabelecimentoKey, token).subscribe((cupom: any) => {\n      sub.unsubscribe();\n      const cupomUp = {status: true, token: \"\"};\n      return new Promise((resolve, reject) => {\n        cuponsGRef.update(cupom[0].key, cupomUp)\n          .then(() => resolve(cupom[0].key))\n          .catch(() => reject());\n      });\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {ToastController} from \"@ionic/angular\";\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ToastService {\n\n  constructor(private toast: ToastController) { }\n\n  async showSuccess(message: string){\n    // //forma sem o async\n    // return this.toast.create({\n    //   message: message,\n    //   duration: 2000;\n    //   color: 'success',\n    //   position: 'bottom'\n    // }).then(toastResult => {\n    //   toastResult.present();\n    // });\n\n    const toastResult = await this.toast.create({\n      message: message,\n      duration: 2000,\n      color: 'success',\n      position: 'bottom'\n    });\n    toastResult.present();\n  }\n\n  async showError(message: string){\n\n    const toastResult = await this.toast.create({\n      message: message,\n      duration: 2000,\n      color: 'danger',\n      position: 'bottom'\n    });\n    toastResult.present();\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\nimport {EstabelecimentoService} from '../../estabelecimento/shared/estabelecimento.service';\nimport {CupomService} from '../shared/cupons.service';\nimport {ToastService} from '../../core/services/toast.service';\n\n@Component({\n  selector: 'app-validacao-cupom',\n  templateUrl: './validacao-cupom.component.html',\n  styleUrls: ['./validacao-cupom.component.scss'],\n})\nexport class ValidacaoCupomComponent implements OnInit {\n\n  cupons;\n  form: FormGroup;\n  estabelecimentoKey: string;\n\n  constructor(\n    private estabelecimentoService: EstabelecimentoService,\n    private cuponsService: CupomService,\n    private formBuilder: FormBuilder,\n    private toast: ToastService\n  ) { }\n\n  ngOnInit() {\n    this.criarFormulario();\n    this.estabelecimentoKey = this.estabelecimentoService.getEstalebelicimentoKey();\n  }\n\n  onSubmit(){\n    const update = this.cuponsService.validateCupom(this.estabelecimentoKey, this.form.get('token').value);\n    this.toast.showSuccess(\"Cupom válidado com sucesso.\");\n\n  }\n\n  criarFormulario(){\n    this.form = this.formBuilder.group({\n      token: ['', Validators.required],\n    });\n  }\n}\n","export default \".cupom-card {\\n  width: 100%;\\n  border-radius: 5px;\\n  padding: 15px;\\n  background-color: #ffffff;\\n  box-shadow: 0px 0px 7px 0px rgba(0, 0, 0, 0.29);\\n}\\n\\n.adicionar-button {\\n  margin-top: 50px;\\n  padding: 15px;\\n  color: #f2f2f2;\\n}\\n\\nion-button {\\n  --border-radius: 35px;\\n  margin-top: 15px;\\n  border-radius: 35px;\\n  box-shadow: 0px 0px 7px 0px rgba(0, 0, 0, 0.29);\\n  font-family: \\\"Ubuntu\\\", sans-serif;\\n  font-weight: normal;\\n  color: #333333;\\n}\\n\\np {\\n  font-size: 12px;\\n  font-weight: medium;\\n  color: #7c7b7b;\\n}\\n\\nion-input {\\n  border: 1px solid #b3b3b3;\\n  border-radius: 5px;\\n  margin-top: 10px;\\n  padding: 5px 15px !important;\\n  font-size: 14px;\\n}\\n\\n.title {\\n  font-size: 14px;\\n  color: #333333;\\n}\\n\\n.cupom-list ion-card {\\n  margin-left: 0px;\\n  margin-right: 0px;\\n}\\n\\n.cupom-list .cupom-item {\\n  border-radius: 5px;\\n  min-height: 80px;\\n  margin-bottom: 15px;\\n  box-shadow: 0px 0px 7px 0px rgba(0, 0, 0, 0.29);\\n}\\n\\n.cupom-list .cupom-item ion-thumbnail {\\n  float: left;\\n  height: 80px;\\n  width: 120px;\\n}\\n\\n.cupom-list .cupom-item ion-thumbnail img {\\n  border-radius: 5px 0px 0px 5px;\\n}\\n\\n.cupom-list .cupom-item p {\\n  font-size: 12px;\\n  margin: 0px;\\n}\\n\\n.cupom-list .cupom-item .content {\\n  margin-left: 120px;\\n  padding: 10px;\\n}\\n\\n.cupom-list .cupom-item .content .title {\\n  font-size: 14px;\\n  float: left;\\n  color: #333333;\\n  margin-botton: 8px;\\n}\\n\\n.cupom-list .cupom-item .content .cupomLink {\\n  position: absolute;\\n  right: 15px;\\n  font-size: 12px;\\n  color: #bea063;\\n}\\n\\n.cupom-list .cupom-item .content .description {\\n  float: left;\\n  color: #bcbcbc;\\n  font-size: 11px;\\n  margin-top: 10px;\\n}\\n\\n.cupom-list .cupom-item .content span {\\n  width: 12px;\\n  height: 12px;\\n  border-radius: 10px;\\n  margin-right: 5px;\\n  margin-top: 5px;\\n}\\n\\n.cupom-list .cupom-item .content .tags {\\n  margin-top: 5px;\\n}\\n\\n.cupom-list .cupom-item .content .ativo {\\n  background-color: green;\\n}\\n\\n.cupom-list .cupom-item .content .desativado {\\n  background-color: darkred;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2N1cG9ucy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxXQUFBO0VBQ0Esa0JBQUE7RUFDQSxhQUFBO0VBQ0EseUJBQUE7RUFDQSwrQ0FBQTtBQUNGOztBQUNBO0VBQ0UsZ0JBQUE7RUFDQSxhQUFBO0VBQ0EsY0FBQTtBQUVGOztBQUFBO0VBQ0UscUJBQUE7RUFDQSxnQkFBQTtFQUNBLG1CQUFBO0VBQ0EsK0NBQUE7RUFDQSxpQ0FBQTtFQUNBLG1CQUFBO0VBQ0EsY0FBQTtBQUdGOztBQURBO0VBQ0UsZUFBQTtFQUNBLG1CQUFBO0VBQ0EsY0FBQTtBQUlGOztBQURBO0VBQ0UseUJBQUE7RUFDQSxrQkFBQTtFQUNBLGdCQUFBO0VBQ0EsNEJBQUE7RUFDQSxlQUFBO0FBSUY7O0FBQUE7RUFDRSxlQUFBO0VBQ0EsY0FBQTtBQUdGOztBQUNFO0VBQ0UsZ0JBQUE7RUFDQSxpQkFBQTtBQUVKOztBQUFFO0VBQ0Usa0JBQUE7RUFDQSxnQkFBQTtFQUNBLG1CQUFBO0VBQ0EsK0NBQUE7QUFFSjs7QUFBSTtFQUNFLFdBQUE7RUFDQSxZQUFBO0VBQ0EsWUFBQTtBQUVOOztBQURNO0VBQ0UsOEJBQUE7QUFHUjs7QUFBSTtFQUNFLGVBQUE7RUFDQSxXQUFBO0FBRU47O0FBQ0k7RUFDRSxrQkFBQTtFQUNBLGFBQUE7QUFDTjs7QUFBTTtFQUNFLGVBQUE7RUFDQSxXQUFBO0VBQ0EsY0FBQTtFQUNBLGtCQUFBO0FBRVI7O0FBQU07RUFDRSxrQkFBQTtFQUNBLFdBQUE7RUFDQSxlQUFBO0VBQ0EsY0FBQTtBQUVSOztBQUFNO0VBQ0UsV0FBQTtFQUNBLGNBQUE7RUFDQSxlQUFBO0VBQ0EsZ0JBQUE7QUFFUjs7QUFBTTtFQUNFLFdBQUE7RUFDQSxZQUFBO0VBQ0EsbUJBQUE7RUFDQSxpQkFBQTtFQUNBLGVBQUE7QUFFUjs7QUFBTTtFQUNFLGVBQUE7QUFFUjs7QUFBTTtFQUNFLHVCQUFBO0FBRVI7O0FBQU07RUFDRSx5QkFBQTtBQUVSIiwiZmlsZSI6ImN1cG9ucy5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY3Vwb20tY2FyZHtcbiAgd2lkdGg6IDEwMCU7XG4gIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgcGFkZGluZzogMTVweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjtcbiAgYm94LXNoYWRvdzogMHB4IDBweCA3cHggMHB4IHJnYmEoMCwwLDAsMC4yOSk7XG59XG4uYWRpY2lvbmFyLWJ1dHRvbntcbiAgbWFyZ2luLXRvcDogNTBweDtcbiAgcGFkZGluZzogMTVweDtcbiAgY29sb3I6ICNmMmYyZjI7XG59XG5pb24tYnV0dG9ue1xuICAtLWJvcmRlci1yYWRpdXM6IDM1cHg7XG4gIG1hcmdpbi10b3A6IDE1cHg7XG4gIGJvcmRlci1yYWRpdXM6IDM1cHg7XG4gIGJveC1zaGFkb3c6IDBweCAwcHggN3B4IDBweCByZ2JhKDAsMCwwLDAuMjkpO1xuICBmb250LWZhbWlseTogJ1VidW50dScsIHNhbnMtc2VyaWY7XG4gIGZvbnQtd2VpZ2h0OiBub3JtYWw7XG4gIGNvbG9yOiAjMzMzMzMzO1xufVxucHtcbiAgZm9udC1zaXplOiAxMnB4O1xuICBmb250LXdlaWdodDogbWVkaXVtO1xuICBjb2xvcjogIzdjN2I3Yjtcbn1cblxuaW9uLWlucHV0e1xuICBib3JkZXI6IDFweCBzb2xpZCAjYjNiM2IzO1xuICBib3JkZXItcmFkaXVzOiA1cHg7XG4gIG1hcmdpbi10b3A6IDEwcHg7XG4gIHBhZGRpbmc6IDVweCAxNXB4IWltcG9ydGFudDtcbiAgZm9udC1zaXplOiAxNHB4O1xufVxuXG5cbi50aXRsZXtcbiAgZm9udC1zaXplOiAxNHB4O1xuICBjb2xvcjogIzMzMzMzMztcbn1cblxuLmN1cG9tLWxpc3R7XG4gIGlvbi1jYXJke1xuICAgIG1hcmdpbi1sZWZ0OiAwcHg7XG4gICAgbWFyZ2luLXJpZ2h0OiAwcHg7XG4gIH1cbiAgLmN1cG9tLWl0ZW17XG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgIG1pbi1oZWlnaHQ6IDgwcHg7XG4gICAgbWFyZ2luLWJvdHRvbTogIDE1cHg7XG4gICAgYm94LXNoYWRvdzogMHB4IDBweCA3cHggMHB4IHJnYmEoMCwwLDAsMC4yOSk7XG5cbiAgICBpb24tdGh1bWJuYWlse1xuICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICBoZWlnaHQ6IDgwcHg7XG4gICAgICB3aWR0aDogMTIwcHg7XG4gICAgICBpbWd7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDVweCAwcHggMHB4IDVweDtcbiAgICAgIH1cbiAgICB9XG4gICAgcHtcbiAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgIG1hcmdpbjogMHB4O1xuXG4gICAgfVxuICAgIC5jb250ZW50e1xuICAgICAgbWFyZ2luLWxlZnQ6IDEyMHB4O1xuICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgIC50aXRsZXtcbiAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICBmbG9hdDogbGVmdDtcbiAgICAgICAgY29sb3I6ICMzMzMzMzM7XG4gICAgICAgIG1hcmdpbi1ib3R0b246IDhweDtcbiAgICAgIH1cbiAgICAgIC5jdXBvbUxpbmt7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgcmlnaHQ6IDE1cHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgY29sb3I6ICNiZWEwNjM7XG4gICAgICB9XG4gICAgICAuZGVzY3JpcHRpb257XG4gICAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgICBjb2xvcjogI2JjYmNiYztcbiAgICAgICAgZm9udC1zaXplOiAxMXB4O1xuICAgICAgICBtYXJnaW4tdG9wOiAxMHB4O1xuICAgICAgfVxuICAgICAgc3BhbntcbiAgICAgICAgd2lkdGg6IDEycHg7XG4gICAgICAgIGhlaWdodDogMTJweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMTBweDtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiA1cHg7XG4gICAgICAgIG1hcmdpbi10b3A6IDVweDtcbiAgICAgIH1cbiAgICAgIC50YWdze1xuICAgICAgICBtYXJnaW4tdG9wOiA1cHg7XG4gICAgICB9XG4gICAgICAuYXRpdm97XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IGdyZWVuO1xuICAgICAgfVxuICAgICAgLmRlc2F0aXZhZG97XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IGRhcmtyZWQ7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iXX0= */\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CuponsPage } from './cupons.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CuponsPage\n  },\n  {\n    path: 'adicionar',\n    loadChildren: () => import('./adicionar/adicionar.module').then( m => m.AdicionarPageModule)\n  },\n  {\n    path: 'adicionar/:key',\n    loadChildren: () => import('./adicionar/adicionar.module').then( m => m.AdicionarPageModule)\n  },\n  {\n    path: 'gerenciar',\n    loadChildren: () => import('./gerenciar/gerenciar.module').then( m => m.GerenciarPageModule)\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CuponsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CuponsPageRoutingModule } from './cupons-routing.module';\n\nimport { CuponsPage } from './cupons.page';\nimport {ValidacaoCupomComponent} from './validacao-cupom/validacao-cupom.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    CuponsPageRoutingModule,\n    ReactiveFormsModule\n  ],\n  declarations: [CuponsPage, ValidacaoCupomComponent],\n  exports: [ValidacaoCupomComponent]\n})\nexport class CuponsPageModule {}\n","export default \"<div class=\\\"cupom-card\\\">\\n  <p>Validar Cupom</p>\\n  <form [formGroup]=\\\"form\\\" class=\\\"form-edit\\\" (ngSubmit)=\\\"onSubmit()\\\">\\n    <ion-input type=\\\"text\\\" formControlName=\\\"token\\\" placeholder=\\\"Código\\\"></ion-input>\\n    <ion-col size=\\\"8\\\" offset=\\\"2\\\">\\n      <ion-button type=\\\"submit\\\" expand=\\\"block\\\">\\n        Validar\\n      </ion-button>\\n    </ion-col>\\n  </form>\\n</div>\\n\";","import { Injectable } from '@angular/core';\nimport {AngularFireDatabase} from '@angular/fire/database';\nimport {AngularFireStorage} from '@angular/fire/storage';\nimport {FirebasePath} from '../../core/shared/firebase-path';\nimport {map} from 'rxjs/operators';\nimport {UsuarioAuthService} from '../../login/shared/usuario-auth.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class EstabelecimentoService {\n\n  proprietariosUid: string;\n  proprietariosEmail: string;\n\n  constructor(\n    private db: AngularFireDatabase,\n    private storage: AngularFireStorage,\n    private usuarioService: UsuarioAuthService\n  ) {\n\n    console.log(this.usuarioService.getUser());\n    const user = this.usuarioService.getUser();\n    console.log(user);\n    // this.proprietariosUid = user.uid;\n    // this.proprietariosEmail = user.email;\n    this.loadUser();\n  }\n\n\n  async loadUser(){\n    const user = this.usuarioService.getUser();\n    this.proprietariosUid = user.uid;\n    this.proprietariosEmail = user.email;\n  }\n\n  getAll() {\n    // return this.estabelecimentosRef.snapshotChanges().pipe(\n    //   map(changes => {\n    //     return changes.map(m => ({ key: m.payload.key, ...m.payload.val() }));\n    //   })\n    // );\n\n\n    const estabelecimentosRef = this.db.list(FirebasePath.ESTABELECIMENTOS, query => query\n      .orderByChild('proprietariosUid')\n      .equalTo(this.proprietariosUid));\n\n    return estabelecimentosRef.snapshotChanges().pipe(\n      map(changes => {\n        return changes.map(m => ({ key: m.payload.key, ...m.payload.val() as {} }));\n      })\n    );\n  }\n\n  getByKey(key: string){\n    const path = `${FirebasePath.ESTABELECIMENTOS}${key}`;\n    return this.db.object(path).snapshotChanges().pipe(\n      map(change => {\n        return { key: change.payload.key, ...change.payload.val() as {} };\n      })\n    );\n  }\n\n  setEstalebelicimentoKey(token: string){\n    localStorage.setItem('estabelecimentoKey', token);\n  }\n\n  removeEstalebelicimentoKey(){\n    localStorage.removeItem('estabelecimentoKey');\n  }\n\n  getEstalebelicimentoKey(){\n    return localStorage.getItem('estabelecimentoKey');\n  }\n}\n"],"sourceRoot":"webpack:///"}