{"version":3,"sources":["./src/app/cupons/adicionar/adicionar-routing.module.ts","./src/app/cupons/adicionar/adicionar.page.html","./src/app/cupons/adicionar/adicionar.page.ts","./src/app/cupons/adicionar/adicionar.page.scss","./src/app/cupons/adicionar/adicionar.module.ts"],"names":[],"mappings":"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","file":"adicionar-adicionar-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { AdicionarPage } from './adicionar.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AdicionarPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class AdicionarPageRoutingModule {}\n","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-back-button slot=\\\"start\\\"></ion-back-button>\\n    <ion-title>{{title}}</ion-title>\\n    <ion-buttons *ngIf=\\\"key\\\" class=\\\"menu-button\\\"  slot=\\\"end\\\">\\n      <ion-icon name=\\\"ellipsis-vertical-sharp\\\"></ion-icon>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-grid>\\n    <ion-row>\\n      <ion-col>\\n        <div class=\\\"adicionar-card\\\">\\n          <p>Cupom</p>\\n          <form [formGroup]=\\\"form\\\" (ngSubmit)=\\\"onSubmit()\\\" class=\\\"form-edit\\\">\\n<!--            <ion-toggle [checked]=\\\"status\\\" (ionChange)=\\\"toggleChange($event)\\\" slot=\\\"end\\\"></ion-toggle>-->\\n            <ion-thumbnail slot=\\\"start\\\" *ngIf=\\\"imagemUrl ==''\\\" (click)=\\\"imagemInput.click()\\\">\\n              <img src=\\\"assets/insert_image.png\\\">\\n              <input type=\\\"file\\\" #imagemInput formControlName=\\\"imagem\\\" (change)=\\\"uploadImagem($event)\\\">\\n            </ion-thumbnail>\\n\\n            <ion-thumbnail slot=\\\"start\\\" *ngIf=\\\"imagemUrl !=''\\\">\\n              <img [src]=\\\"imagemUrl\\\">\\n            </ion-thumbnail>\\n\\n\\n\\n            <ion-item>\\n              <ion-label>Ativo</ion-label>\\n              <ion-checkbox slot=\\\"end\\\" [formControl]=\\\"status\\\"></ion-checkbox>\\n            </ion-item>\\n\\n\\n            <ion-input formControlName=\\\"nome\\\" type=\\\"text\\\" placeholder=\\\"Nome\\\"></ion-input>\\n            <ion-textarea rows=\\\"6\\\" formControlName=\\\"descricao\\\" placeholder=\\\"Descrição\\\"></ion-textarea>\\n\\n            <ion-col size=\\\"8\\\" offset=\\\"2\\\">\\n              <ion-button type=\\\"submit\\\" expand=\\\"block\\\">\\n                Salvar\\n              </ion-button>\\n            </ion-col>\\n          </form>\\n        </div>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n</ion-content>\\n\";","import { Component, OnInit } from '@angular/core';\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\nimport {ActivatedRoute, Router} from '@angular/router';\nimport {ToastService} from '../../core/services/toast.service';\nimport {CupomService} from '../shared/cupons.service';\nimport {EstabelecimentoService} from '../../estabelecimento/shared/estabelecimento.service';\n\n@Component({\n  selector: 'app-adicionar',\n  templateUrl: './adicionar.page.html',\n  styleUrls: ['./adicionar.page.scss'],\n})\nexport class AdicionarPage implements OnInit {\n\n  title: string = \"Adicionar\";\n  form: FormGroup;\n  key: string;\n  private file: File = null;\n  imagemUrl: string = '';\n  filePath: string = '';\n\n  estabelecimentoKey: string;\n\n  constructor(\n    private estabelecimentoService: EstabelecimentoService,\n    private cuponsService: CupomService,\n    private formBuilder: FormBuilder,\n    private route: ActivatedRoute,\n    private router: Router,\n    private toast: ToastService\n  ) { }\n\n\n  ngOnInit() {\n    this.estabelecimentoKey = this.estabelecimentoService.getEstalebelicimentoKey();\n    this.criarFormulario();\n    const key = this.route.snapshot.paramMap.get('key');\n\n    if (key){\n      this.title = \"Gerenciar\";\n      const subscribe = this.cuponsService.getByKey(key).subscribe((cupom : any) => {\n        subscribe.unsubscribe();\n\n        this.key = cupom.key;\n        this.form.patchValue({\n          nome: cupom.nome,\n          descricao: cupom.descricao,\n          status: cupom.status,\n          imagem: cupom.imagem\n        });\n\n        this.imagemUrl = cupom.imagem || '';\n        this.filePath = cupom.filePath || '';\n      });\n    }\n  }\n\n  criarFormulario(){\n    this.form = this.formBuilder.group({\n      nome: ['', Validators.required],\n      descricao: [''],\n      status: [true],\n      imagem: [''],\n    });\n\n    this.file = null;\n    this.imagemUrl = '';\n    this.filePath = '';\n  }\n\n  get status() { return this.form.get('status'); }\n\n  uploadImagem(event: any){\n    if (event.target.files.length){\n      this.file = event.target.files[0];\n      this.form.get('imagem').updateValueAndValidity();\n      const reader = new FileReader();\n      reader.onload = () => {\n        this.imagemUrl = reader.result.toString();\n      };\n      reader.readAsDataURL(this.file);\n    }else{\n      this.file = null;\n    }\n  }\n\n  removeImagem(){\n    if (this.key) this.cuponsService.removeImg(this.filePath, this.key);\n\n    this.imagemUrl = '';\n    this.filePath = '';\n  }\n\n  toggleChange(event){\n    console.log(event.value);\n    this.form.get('status').setValue(event.value);\n  }\n\n  onSubmit(){\n    if(this.form.valid){\n      let result: Promise<{}>;\n\n      const cupom = this.form.value;\n      cupom.estabelecimentoKey = this.estabelecimentoKey;\n\n      if (this.key) {\n        result = this.cuponsService.update(this.key, cupom);\n      } else {\n        result = this.cuponsService.insert(cupom);\n      }\n\n      if (this.file) {\n        result.then((key: string) => {\n          this.cuponsService.uploadImg(key, this.file);\n          this.criarFormulario();\n        });\n      } else {\n        this.criarFormulario();\n      }\n      this.toast.showSuccess('Cupom salvo com sucesso');\n      this.router.navigate(['/tabs/cupons']);\n    }\n  }\n\n}\n","export default \".adicionar-card {\\n  width: 100%;\\n  border-radius: 5px;\\n  padding: 15px;\\n  background-color: #ffffff;\\n  box-shadow: 0px 0px 7px 0px rgba(0, 0, 0, 0.29);\\n}\\n\\nion-toggle {\\n  position: absolute;\\n  right: 15px;\\n  top: 25px;\\n}\\n\\nion-thumbnail {\\n  width: 100%;\\n  height: 160px;\\n  --border-radius: 5px;\\n  margin-top: 20px;\\n}\\n\\nion-button {\\n  --border-radius: 35px;\\n  margin-top: 15px;\\n  border-radius: 35px;\\n  box-shadow: 0px 0px 7px 0px rgba(0, 0, 0, 0.29);\\n  font-family: \\\"Ubuntu\\\", sans-serif;\\n  font-weight: normal;\\n  color: #333333;\\n}\\n\\np {\\n  font-size: 12px;\\n  font-weight: medium;\\n  color: #7c7b7b;\\n}\\n\\nion-input, ion-textarea {\\n  border: 1px solid #b3b3b3;\\n  border-radius: 5px;\\n  margin-top: 10px;\\n  padding: 5px 15px !important;\\n  font-size: 14px;\\n}\\n\\ninput[type=file] {\\n  display: none;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2FkaWNpb25hci5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxXQUFBO0VBQ0Esa0JBQUE7RUFDQSxhQUFBO0VBQ0EseUJBQUE7RUFDQSwrQ0FBQTtBQUNGOztBQUVBO0VBQ0Usa0JBQUE7RUFDQSxXQUFBO0VBQ0EsU0FBQTtBQUNGOztBQUVBO0VBQ0UsV0FBQTtFQUNBLGFBQUE7RUFDQSxvQkFBQTtFQUNBLGdCQUFBO0FBQ0Y7O0FBRUE7RUFDRSxxQkFBQTtFQUNBLGdCQUFBO0VBQ0EsbUJBQUE7RUFDQSwrQ0FBQTtFQUNBLGlDQUFBO0VBQ0EsbUJBQUE7RUFDQSxjQUFBO0FBQ0Y7O0FBQ0E7RUFDRSxlQUFBO0VBQ0EsbUJBQUE7RUFDQSxjQUFBO0FBRUY7O0FBQ0E7RUFDRSx5QkFBQTtFQUNBLGtCQUFBO0VBQ0EsZ0JBQUE7RUFDQSw0QkFBQTtFQUNBLGVBQUE7QUFFRjs7QUFFQTtFQUNFLGFBQUE7QUFDRiIsImZpbGUiOiJhZGljaW9uYXIucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmFkaWNpb25hci1jYXJke1xuICB3aWR0aDogMTAwJTtcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xuICBwYWRkaW5nOiAxNXB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmO1xuICBib3gtc2hhZG93OiAwcHggMHB4IDdweCAwcHggcmdiYSgwLDAsMCwwLjI5KTtcbn1cblxuaW9uLXRvZ2dsZXtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICByaWdodDogMTVweDtcbiAgdG9wOiAyNXB4O1xuXG59XG5pb24tdGh1bWJuYWlse1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxNjBweDtcbiAgLS1ib3JkZXItcmFkaXVzOiA1cHg7XG4gIG1hcmdpbi10b3A6IDIwcHg7XG5cbn1cbmlvbi1idXR0b257XG4gIC0tYm9yZGVyLXJhZGl1czogMzVweDtcbiAgbWFyZ2luLXRvcDogMTVweDtcbiAgYm9yZGVyLXJhZGl1czogMzVweDtcbiAgYm94LXNoYWRvdzogMHB4IDBweCA3cHggMHB4IHJnYmEoMCwwLDAsMC4yOSk7XG4gIGZvbnQtZmFtaWx5OiAnVWJ1bnR1Jywgc2Fucy1zZXJpZjtcbiAgZm9udC13ZWlnaHQ6IG5vcm1hbDtcbiAgY29sb3I6ICMzMzMzMzM7XG59XG5we1xuICBmb250LXNpemU6IDEycHg7XG4gIGZvbnQtd2VpZ2h0OiBtZWRpdW07XG4gIGNvbG9yOiAjN2M3YjdiO1xufVxuXG5pb24taW5wdXQsIGlvbi10ZXh0YXJlYXtcbiAgYm9yZGVyOiAxcHggc29saWQgI2IzYjNiMztcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xuICBtYXJnaW4tdG9wOiAxMHB4O1xuICBwYWRkaW5nOiA1cHggMTVweCFpbXBvcnRhbnQ7XG4gIGZvbnQtc2l6ZTogMTRweDtcbn1cblxuXG5pbnB1dFt0eXBlPWZpbGVde1xuICBkaXNwbGF5OiBub25lO1xufVxuXG4iXX0= */\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { AdicionarPageRoutingModule } from './adicionar-routing.module';\n\nimport { AdicionarPage } from './adicionar.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ReactiveFormsModule,\n    AdicionarPageRoutingModule\n  ],\n  declarations: [AdicionarPage]\n})\nexport class AdicionarPageModule {}\n"],"sourceRoot":"webpack:///"}